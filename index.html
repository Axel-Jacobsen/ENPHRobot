<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="styles/css/main.css">
    <title>Vanessa</Title>
    <style>
        @import url('https://fonts.googleapis.com/css?family=Lato');
    </style>
</head>

<body>
    <div class="pageDiv introDiv">
        <div class="shade positionTopLeft">
            <h2 class="titleCard">Vanessa</h2>
            <p class="mainLinks">
                <a href="#theproblem">The problem</a>
                <a href="#strategy">Strategy</a>
                <i>Major Components</i>
                <a href="#mechanical">Mechanics</a>
                <a href="#electrical">Electronics</a>
                <a href="#software">Software</a>
                <a href="#projectmgmt">Project Management</a>
                <i>Final Notes</i>
                <a href="#comp">Performance and Takeaways</a>
                <a href="#whoami">Meet the team</a>
            </p>
        </div>
    </div>

    <div class="pageDiv problemDiv" id="theproblem">
        <div class="vFlexOnWidth">
            <div class="halfWidth">
                <h2 class="titleCard">The Problem</h2>
                <p>
                    Four Ewoks and Chewbacca are trapped in the Empire Stronghold! Our task was to create an autonomous robot to navigate the
                    stronghold and return the prisoners to the start of the course.
                </p>
                <p>
                    To do this, we had to navigate over gaps, identify and react to alternating IR frequencies, climb a ramp, and deploy a basket
                    to return our captured critters.
                </p>
                <p>
                    This is a diagram of the competition surface. It shows the positions of the Ewoks and Chewbacca, the gaps that we had to
                    cross, and the position and direction of the IR sensors.
                </p>
            </div>

            <!-- We should change this image if we can, leaving it now to finish other stuff-->
            <img class="baseImg compImg" src="images/competition.png">
        </div>
    </div>

    <div class="pageDiv strategyDiv" id="strategy">
        <div class="vFlexOnWidth vReverseColumn">
            <img class="baseImg robotImg" src="images/realbot.JPG">
            <div class="halfWidth rightSideText">
                <h2 class="titleCard">Strategy</h2>
                <p>
                    Our team took an unique approach to this challenge.
                </p>
                <p>
                    To navigate to Ewoks, a RaspberryPi was running a machine learning algorithm called
                    <a href="https://pjreddie.com/darknet/yolo/">YOLO</a> to find their locations.
                </p>
                <p>
                    This RaspberryPi would send signals to a microcontroller (STM32F4) that was processing signals and making decisions. The
                    microcontroller would request directions to an Ewok when it was ready, allowing us to navigate purely
                    by finding Ewoks, and not by following tape.
                </p>
                <p>
                    We chose a treaded robot in order to traverse the gaps. This let us roll over the gaps instead of taking time to deploy a
                    bridge that may be misplaced. Treads gave our robot reliability, as well as allowing us to focus on other
                    aspects of the competition.
                </p>
            </div>
        </div>
    </div>


    <div class="pageDiv mechDiv" id="mechanical">
        <div class="vFlexOnWidth">

        </div>
    </div>

    <div class="pageDiv elecDiv" id="electrical">
        <div class="vFlexOnWidth vReverseColumn">
            <div class="vFlexOnWidth column verticalImageAndCaptions">
                <img class="baseImg pcbImg" src="images/board.png">
                <i>PCB Diagram</i>
                <img class="baseImg anglePcbImg" src="images/angled_real_pcb.jpg">
                <i>PCB complete with circuits elements. STM32F4 plugs in on the female headers visible in this image.</i>
            </div>
            <div class="halfWidth smallerTextinDiv">
                <h2 class="titleCard">Electronics</h2>
                <p>
                    Our electronics were composed of three main systems: the STM32F4 Microcontroller (MCU), the Raspberry Pi, and our PCB which
                    interfaced the STM32F4, Raspberry Pi, and all of our sensors. The circuitry of the robot was integrated
                    into a single printed circuit board, which we designed using Autodesk Eagle (the PCB diagram can be seen
                    right). The Raspberry Pi and our STM32F4 MCU plugged right into the top and bottom of the board. Printing
                    the circuit board allowed us to bundle up the "brains" of our robot between the two tracks, making our
                    electrical design compact and robust. // Better words for "making our electrical design compact and robust."
                </p>
                <br>
                <p>
                    Our PCB was composed of several circuits:
                    <br> - Two H-Bridge circuits (to drive our motors)
                    <br> - Basic circuitry from the MCU to control the servos (to actuate the basket and claw)
                    <br> - Two rail-to-rail amplifiers for the IR sensors (to amplify the signal for digital processing)
                    <br> - Four reflective optical detector circuits (to find edges and obstructions in our paths)
                    <br> - One optical detector circuit (across the claw to detect when an Ewok was in its grasp).
                </p>
                <br>
                <p>
                    Electrical noise is an issue with any complex circuitry. We were able to quiet electrical noise issues by using a common
                    ground plane throughout the circuit board, placing a pair of decoupling capacitors at every IC, and by
                    powering the three main parts of the circuit board separately.
                </p>

                <br>

                <h3>
                    <i>Issues and solutions</i>
                </h3>
                <p>
                    We had only one issue with the PCB itself: Some of the high-current traces were too thin and blew under heavy load (For example,
                    our motor circuits). This issue was easily fixed by shorting those traces with thicker wire.
                </p>
                <p>
                    We also had an issue that was more difficult to diagnose. We found that under harsh conditions (e.g. removing the load on
                    the motors quickly by lifting the robot) created ground transience which travelled back into the STM32F4
                    and fried it. To fix this issue, we added a Zener diode and capacitor in parallel on the input supply
                    to prevent STM-Frying power spikes. We also added Schottky diodes parallel to the H-Bridge inputs in
                    efforts to isolate them. After making these changes, we had no further issues.
                </p>
            </div>
        </div>
    </div>

    <div class="pageDiv codeDiv" id="software">
        <div class="vFlexOnWidth">
            <div class="vFlexOnWidth column verticalImageAndCaptions">
                <h4>Onboard images from competition</h4>

                <img class="baseImg compImg" src="images/comp1.jpg">
                <i>First image near the end of the ramp.</i>

                <img class="baseImg compImg" src="images/comp2.jpg">
                <i>Second image, just before the first Ewok. The horizontal lines are due to damage to the ribbon cable from
                    the camera to the Rasberry Pi.</i>

                <img class="baseImg compImg" src="images/comp3.jpg">
                <i>Third image, right after the first gap. The miscoloration is due again to damage to the damage to the camera's
                    ribbon cable. Notice, even with the color distoriton, the network still found the Ewok.</i>
            </div>
            <div class="halfWidth rightSideText">
                <h2 class="titleCard">Software</h2>
                <p>
                    In order to navigate towards the Ewoks, we used computer vision. A Raspberry Pi on the robot continuously captured images
                    of the course ahead using a fisheye camera, and these photos were processed using a Python implementation
                    of the extremely fast YOLO network (paper | website) trained on over 2500 photos of the competition surface.
                    During a run, the STM microcontroller would periodically request images from the Raspberry Pi. When it
                    did, the network would find the coordinates of the bounding boxes around each Ewok in the frame, and
                    we would calculate our heading error by finding the distance between the center of the frame and the
                    center of the bounding box. This error was then written to an 8-bit digital to analog converter (a resistor
                    ladder on our PCB) and the analog voltage was read by the STM. At the same time, an interrupt was triggered
                    on the STM, telling it to stop the normal navigation loop, and turn to the heading indicated by the Raspberry
                    Pi. This would turn the robot to face the next Ewok, and then the robot would continue driving towards
                    it. By using computer vision, we were able to see the Ewoks much farther ahead than many of the other
                    teams who were using pressure sensors or infrared light sensors. Because of this, we had to hard-code
                    very few sections of the course, and could navigate directly from Ewok to Ewok. Given more time, a universal
                    procedure with no hard-coded maneuvers could have been used to navigate any course with similar objectives,
                    without needing prior knowledge of the layout. Issues: The camera still occasionally missed Ewoks in
                    the frame, and the low framerate (~2.5s per frame) required the robot to take things very slowly during
                    the run. Even more training photos could have helped to decrease the number of missed Ewoks, but for
                    the network we were using, running on a Raspberry Pi we likely couldn’t improve on the framerate. A similar
                    approach using a simpler network could have given more speed with the tradeoff of accuracy, which may
                    have been a slight improvement on course.
                </p>
            </div>
        </div>
    </div>

    <div class="pageDiv compDiv" id="comp">
        <div class="vFlexOnWidth">

        </div>
    </div>

    <div class="pageDiv whoAreWeDiv" id="whoami">
        <div class="vFlexOnWidth column">
            <h2 class="titleCard">Meet Team 13</h2>
            <div class="vFlexOnWidth autoHeight makeMeThicc">
                <div class="human">
                    <i>Ben Holmes</i>
                    <img class="baseImg humanImg" src="images/ben.jpeg">
                    <p class="humanText">
                        - Machine Learning
                        <br> - Mechanics
                    </p>
                </div>
                <div class="human">
                    <i>Ro-ee Tal</i>
                    <img class="baseImg humanImg" src="images/roee.jpeg">
                    <p class="humanText">
                        - PCB / Electronics
                        <br> - Software
                    </p>
                </div>
                <div class="human">
                    <i>Sean Cameron</i>
                    <img class="baseImg humanImg" src="images/sean.jpeg">
                    <p class="humanText">
                        - CAD / Prototyping
                        <br> - Mechanics
                    </p>
                </div>
                <div class="human">
                    <i>Axel Jacobsen</i>
                    <img class="baseImg humanImg" src="images/axel.jpeg">
                    <p class="humanText">
                        - IR / Electronics
                        <br> - Software
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!--
        <video width="!!!!" height="!!!!" autoplay>
            <source src="IMG_2018.TRIM.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    -->
</body>

</html>